(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{688:function(t,e,a){t.exports=a.p+"assets/img/MissingCreds.8a79a647.png"},689:function(t,e,a){t.exports=a.p+"assets/img/appserviceandplan.604819db.png"},690:function(t,e,a){t.exports=a.p+"assets/img/webappendpoint.5b16ac8e.png"},691:function(t,e,a){t.exports=a.p+"assets/img/deploymenterror.b1ecd993.png"},692:function(t,e,a){t.exports=a.p+"assets/img/list-of-files.4d399088.png"},693:function(t,e,a){t.exports=a.p+"assets/img/deploywebapp.c436da41.png"},860:function(t,e,a){"use strict";a.r(e);var s=a(25),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"deploy-to-azure-webapp-using-github-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-to-azure-webapp-using-github-actions"}},[t._v("#")]),t._v(" Deploy to Azure WebApp using GitHub Actions")]),t._v(" "),s("p",[t._v("‚è≤Ô∏è "),s("em",[t._v("est. time to complete: 30 min.")]),t._v(" ‚è≤Ô∏è")]),t._v(" "),s("h2",{attrs:{id:"here-is-what-you-will-learn-üéØ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#here-is-what-you-will-learn-üéØ"}},[t._v("#")]),t._v(" Here is what you will learn üéØ")]),t._v(" "),s("p",[t._v("In this challenge you will learn how to:")]),t._v(" "),s("ul",[s("li",[t._v("access your Azure Subscription from GitHub Actions")]),t._v(" "),s("li",[t._v("use GitHub Secrets to securely store access credentials")]),t._v(" "),s("li",[t._v("create a Service Principal for your Azure Subscription")]),t._v(" "),s("li",[t._v("create a Resource Group in GitHub Actions")]),t._v(" "),s("li",[t._v("deploy a bicep template using GitHub Actions")]),t._v(" "),s("li",[t._v("build and deploy your WebApp to Azure AppService")])]),t._v(" "),s("h2",{attrs:{id:"table-of-contents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[t._v("#")]),t._v(" Table of contents")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"#getting-started"}},[t._v("Getting started")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#create-azure-bicep-template"}},[t._v("Create Azure Bicep template")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#create-resource-group-and-deploy-bicep-template"}},[t._v("Create resource group and deploy Bicep template")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#create-a-simple-express-app"}},[t._v("Create a simple express app")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#deploy-appservice"}},[t._v("Deploy AppService")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#finish"}},[t._v("Finish")])])]),t._v(" "),s("h2",{attrs:{id:"getting-started"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting started")]),t._v(" "),s("p",[t._v("In this challenge we will learn how to securely access your Azure Subscriptions\nfrom GitHub, how to create infrastructure from code and how to deploy into the\nfreshly created infrastructure.")]),t._v(" "),s("p",[t._v("As in the previous challenges we will start with a new repository.")]),t._v(" "),s("p",[t._v("Create one now.")]),t._v(" "),s("h3",{attrs:{id:"accessing-azure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#accessing-azure"}},[t._v("#")]),t._v(" Accessing Azure")]),t._v(" "),s("p",[t._v("In your fresh repository create a new GitHub Actions workflow.")]),t._v(" "),s("p",[t._v("We will use the "),s("code",[t._v("Azure/login")]),t._v(" Action to give our deploy job permissions within\nour Azure Subscription. Take a look at the\n"),s("a",{attrs:{href:"https://github.com/Azure/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation"),s("OutboundLink")],1),t._v(" for the "),s("code",[t._v("Azure/login")]),t._v(" Action and\nread through the "),s("a",{attrs:{href:"https://github.com/Azure/login#configure-deployment-credentials",target:"_blank",rel:"noopener noreferrer"}},[t._v('"Configure deployment\ncredentials"'),s("OutboundLink")],1),t._v("\nsection.")]),t._v(" "),s("p",[t._v("You can use the sample workflow provided below. Just commit it into your\nrepository and watch the first execution fail.")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# az-login.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Display Account Info\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Display Azure account info\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" az account show "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("o yaml\n")])])]),s("p",[t._v("Out of the box your GitHub Pipeline will not have any credentials in place to\nlog into your Azure Subscriptions. The first run of your pipeline should fail\nwith an error message like this:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Error: Az CLI Login failed. Please check the credentials.\n")])])]),s("p",[s("img",{attrs:{src:a(688),alt:"Failed pipeline run due to missing credentials"}})]),t._v(" "),s("h3",{attrs:{id:"programmatic-access-to-azure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#programmatic-access-to-azure"}},[t._v("#")]),t._v(" Programmatic access to Azure")]),t._v(" "),s("p",[t._v("To allow GitHub to interact with our Azure Subscriptions we need to create a\nService Account in our Azure Active Directory. This account represents not a\nuser but a service, machine or digital agent. These accounts are called\n"),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals#service-principal-object",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("Service\nPrincipal")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Having read the documentation on the "),s("code",[t._v("Azure/login")]),t._v(" you might already have seen\nthe following line to create a Service Principal for role based access control.")]),t._v(" "),s("p",[t._v("Make sure to "),s("strong",[t._v("change the name")]),t._v(" for your service principal so you can identify\nit later on your Azure AD and scope the contributor access to your subscription\nby setting your subscription id for the scope.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change the name and set use your subscription-id to create a Service Principal.")]),t._v("\naz ad sp create-for-rbac --name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{name}-github-actions-sp"')]),t._v(" --sdk-auth --role contributor --scopes /subscriptions/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("subscription-id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("Take a "),s("strong",[t._v("secure")]),t._v(" note of the "),s("code",[t._v("json")]),t._v(" response returned by this command. You can\nreuse these credentials throughout the day.")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("üìù It is best practice to set the scope of the Service Principal based on the\n"),s("strong",[t._v("principal of least privilege")]),t._v(". Here we scope to the entire subscription so you\ncan use it to create resource groups programmatically and reuse it for the rest\nof todays challenges. On production accounts you will probably scope the access\nto a specific resource group.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("--scopes /subscriptions/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("subscription-id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/resourceGroups/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("resource-group"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Or even a specific resource:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("--scopes /subscriptions/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("subscription-id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/resourceGroups/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("resource-group"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/providers/Microsoft.Web/sites/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("app-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"storing-the-secret"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storing-the-secret"}},[t._v("#")]),t._v(" Storing the secret")]),t._v(" "),s("p",[t._v("Now that we have created the Service Principal and have acquired the necessary\naccess credentials we can store them in our repository in GitHub.")]),t._v(" "),s("p",[t._v("Navigate to your repositories "),s("code",[t._v("Settings > Secrets")]),t._v(" page and add a new secret\nnamed "),s("code",[t._v("AZURE_CREDENTIALS")]),t._v(".")]),t._v(" "),s("div",{pre:!0},[s("p",[t._v("Now we should be able to re-run our workflow file from the beginning. We\nreferenced the GitHub secret using the "),s("code",[t._v("${{ secrets.AZURE_CREDENTIALS }}")]),t._v("\nexpression in the "),s("code",[t._v("azure/login")]),t._v(" action.")])]),s("p",[t._v("Before continuing, make sure the workflow executes successfully and you can see\nyour account information in the workflow output.")]),t._v(" "),s("h2",{attrs:{id:"create-azure-bicep-template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-azure-bicep-template"}},[t._v("#")]),t._v(" Create Azure Bicep template")]),t._v(" "),s("p",[t._v("Let's see how we can prepare our infrastructure for our WebApp deployment.")]),t._v(" "),s("p",[t._v("We will start pretty simple with just the minimal requirements to run an Azure\nApp Service. That mean deploying an App Service Plan and the App Service itself.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(689),alt:"Architecture of AppServicePlan and AppService"}})]),t._v(" "),s("p",[t._v("To be able to expand and evolve our infrastructure together with our\napplications source code, we will use "),s("em",[t._v("infrastructure as code")]),t._v(" "),s("strong",[t._v("IaC")]),t._v(" to\ndescribe the desired state of our resources.")]),t._v(" "),s("p",[t._v("Take a look a the following Azure Bicep template.")]),t._v(" "),s("div",{staticClass:"language-bicep extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// infra.bicep\n@description('The SKU of App Service Plan')\nparam planSku string = 'B1'\n\n@maxLength(8)\n@description('Name of environment')\nparam env string = 'webapp'\n\n@description('Resource tags object to use')\nparam resourceTag object = {\n  Environment: env\n  Application: 'Webapp'\n}\nvar location = resourceGroup().location\n\nvar webAppName = 'app-webapp-${env}-${uniqueString(resourceGroup().id)}'\nvar planName = 'plan-webapp-${env}-${uniqueString(resourceGroup().id)}'\n\nresource appplan 'Microsoft.Web/serverfarms@2020-12-01' = {\n  name: planName\n  location: location\n  kind: 'linux'\n  sku: {\n    name: planSku\n  }\n  properties: {\n    reserved: true\n  }\n}\n\nresource webapp 'Microsoft.Web/sites@2020-12-01' = {\n  name: webAppName\n  location: location\n  tags: resourceTag\n  kind: 'app,linux'\n  properties: {\n    serverFarmId: appplan.id\n    httpsOnly: true\n    clientAffinityEnabled: false\n    siteConfig: {\n      linuxFxVersion: 'NODE|14-lts'\n      alwaysOn: true\n    }\n  }\n}\n\noutput webAppName string = webAppName\noutput webAppEndpoint string = webapp.properties.defaultHostName\n")])])]),s("p",[t._v("This template describes just the two resources we will need for now.")]),t._v(" "),s("p",[t._v("Note that we can configure this template using it's parameters "),s("code",[t._v("env")]),t._v(", "),s("code",[t._v("planSku")]),t._v("\nand "),s("code",[t._v("resourceTag")]),t._v(" and that a deployment of this template will output two values\n"),s("code",[t._v("webAppName")]),t._v(" and "),s("code",[t._v("webAppEndpoint")]),t._v(". We will use these in the following step, when\nwe deploy the template to a resource group using our workflow in GitHub.")]),t._v(" "),s("p",[t._v("Create a new "),s("code",[t._v("infra.bicep")]),t._v(" file in your repository containing the bicep template\nabove.")]),t._v(" "),s("p",[t._v("If you want to try out the bicep template from your local machine before\nautomating everything in GitHub you can do so by creating a new resource group.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("az group create --name bicep-template-test --location westeurope\n")])])]),s("p",[t._v("Then deploy the template to that resource group like this:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("az deployment group create -g bicep-template-test --template-file infra.bicep\n")])])]),s("p",[t._v("If you do this don't forget to delete the resource group when you are done.")]),t._v(" "),s("h2",{attrs:{id:"create-resource-group-and-deploy-bicep-template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-resource-group-and-deploy-bicep-template"}},[t._v("#")]),t._v(" Create resource group and deploy Bicep template")]),t._v(" "),s("p",[t._v("Let's go back to our GitHub Actions workflow from the beginning.")]),t._v(" "),s("p",[t._v("We will start by renaming and extending the workflow file to do the following:")]),t._v(" "),s("ul",[s("li",[t._v("declare variables for all steps in the entire workflow")]),t._v(" "),s("li",[t._v("checkout the repository")]),t._v(" "),s("li",[t._v("log in to Azure")]),t._v(" "),s("li",[t._v("create a new resource group")]),t._v(" "),s("li",[t._v("deploy the bicep template to that group")]),t._v(" "),s("li",[t._v("print one of the template outputs in the workflow log")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# deploy-infra.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Bicep template\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change this if more then one user is deploying to")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the same subscription")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("bicep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rg\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_LOCATION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" westeurope\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ENV_NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" devd4\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy-infra")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Create Resource Group\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          az group create\n          -l ${{ env.RESOURCE_GROUP_LOCATION }}\n          -n ${{ env.RESOURCE_GROUP_NAME }}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Bicep template\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" azure/arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" infra\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resourceGroupName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" env.RESOURCE_GROUP_NAME "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./infra.bicep\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Here we pass the template parameters to the deployment")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("parameters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n            env=${{ env.ENV_NAME }}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Print WebApp endpoint\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Here we read the outputs of our previously deployed template")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" steps.infra.outputs.webAppEndpoint "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("With the updated workflow file, the stored secret and the "),s("code",[t._v("infra.bicep")]),t._v(" template\nin place, we should be able to run our first deployment directly into our Azure\nsubscription.")]),t._v(" "),s("p",[t._v("Check the workflow log. You should be able to find the "),s("code",[t._v("Print WebApp endpoint")]),t._v("\nstep and within the link to your freshly deployed app service. You can also take\na look at the Azure Portal to make sure the desired resources have been\ndeployed.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(690),alt:"WebApp endpoint being printed to the workflow log"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("üìù Should you run into any errors during the template deployment steps, you can\ncheck the resource groups deployment tab on the Azure Portal to get more\ninformation on what went wrong.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(691),alt:"Resource group deployment error detail on Azure Portal"}})])]),t._v(" "),s("h2",{attrs:{id:"create-a-simple-express-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-simple-express-app"}},[t._v("#")]),t._v(" Create a simple express app")]),t._v(" "),s("p",[t._v("You should have just seen the welcome page for the Azure App Service. Now we\nwant to see how we could deploy our own application to the App Service.")]),t._v(" "),s("p",[t._v("In this section we will use\n"),s("a",{attrs:{href:"https://expressjs.com/en/starter/generator.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("express-generator"),s("OutboundLink")],1),t._v(" to generate\na small nodejs express app and make sure we can run it locally.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("npx express-generator ./ --view pug --git\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" start\n")])])]),s("p",[t._v("This should start a small web application on\n"),s("a",{attrs:{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("localhost:3000")]),s("OutboundLink")],1),t._v(". If everything checks out for you\nfeel free to look around the app and don't forget to commit and push the app to\nyour repository.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('git add .\ngit commit -m "Add simple express app"\ngit push\n')])])]),s("p",[t._v("With a proper web application in place, we can now take a look at how to deploy\nthis to the Azure App Service.")]),t._v(" "),s("h2",{attrs:{id:"deploy-appservice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-appservice"}},[t._v("#")]),t._v(" Deploy AppService")]),t._v(" "),s("p",[t._v("By now your repositories content should look something like this:")]),t._v(" "),s("p",[s("img",{attrs:{src:a(692),alt:"List of files your repository"}})]),t._v(" "),s("p",[t._v("You should have a workflow file under "),s("code",[t._v(".github/workflows/")]),t._v(", an "),s("code",[t._v("infra.bicep")]),t._v(" and\nvarious files and folders specific to the generated express app.")]),t._v(" "),s("p",[t._v("Let's go to our workflow file and extend it by creating a second job named\n"),s("code",[t._v("deploy-webapp")]),t._v(" and an output that we can reference for our "),s("code",[t._v("deploy-infra")]),t._v(" job.")]),t._v(" "),s("p",[t._v("The new "),s("code",[t._v("deploy-webapp")]),t._v(" job runs the following steps:")]),t._v(" "),s("ul",[s("li",[t._v("check out the source code")]),t._v(" "),s("li",[t._v("setup nodejs 12")]),t._v(" "),s("li",[t._v("install the npm dependencies from the lockfile")]),t._v(" "),s("li",[t._v("login to Azure")]),t._v(" "),s("li",[t._v("deploy to the Azure App Service")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#deploy.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CI\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("bicep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rg\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_LOCATION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" westeurope\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ENV_NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" devd4\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy-infra")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The output can be read from other jobs that depend on this one")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("outputs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("webAppName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" steps.infra.outputs.webAppName "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Create ResourceGroup\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          az group create\n          -l ${{ env.RESOURCE_GROUP_LOCATION }}\n          -n ${{ env.RESOURCE_GROUP_NAME }}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" azure/arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" infra\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resourceGroupName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" env.RESOURCE_GROUP_NAME "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./infra.bicep\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("parameters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" env=$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" env.ENV_NAME "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Print WebApp endpoint\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" steps.infra.outputs.webAppEndpoint "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy-webapp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("needs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("infra"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Setup Node.js environment\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v2.2.0\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 12.x\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Npm install\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm ci\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Azure WebApp\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/webapps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@v2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# We reference the webAppName output of the deploy-infra job")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" needs.deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("infra.outputs.webAppName "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("startup-command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm start\n")])])]),s("p",[t._v("Once you've updated an started your workflow you should see both dependant jobs\nin graphical overview on your workflows summary page.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(693),alt:"Deployment with two depending jobs running"}})]),t._v(" "),s("p",[t._v("Wait for the deployment to complete and access your webapps endpoint again from your browser.\nYou should see the deployed express app running on your App Service.")]),t._v(" "),s("h2",{attrs:{id:"finish"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#finish"}},[t._v("#")]),t._v(" Finish")]),t._v(" "),s("p",[t._v("Congratulations! You've just deployed your first infrastructure and webapp using GitHub Actions.")]),t._v(" "),s("p",[t._v("Feel free to make a few minor changes to the webapp and see how the updates to\nyour repository trigger a new deployment updating the WebApp in place.")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/day4/challenges/02-challenge-github-actions-intro.html"}},[t._v("‚óÄ Previous challenge")]),t._v(" | "),s("RouterLink",{attrs:{to:"/day4/"}},[t._v("üîº Day 4")]),t._v(" | "),s("RouterLink",{attrs:{to:"/day4/challenges/04-challenge-azdc-repo.html"}},[t._v("Next challenge ‚ñ∂")])],1)])}),[],!1,null,null,null);e.default=n.exports}}]);